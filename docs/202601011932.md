Act as a Senior Frontend Architect and Product Designer.

**Project Goal**:
Build "Xiaoxinbao" (小馨宝), a mental support AI agent for cancer patients.
The app must be secure (proxy API), anonymous (local storage only), and emotionally healing (warm UI).

**Tech Stack**:
- Framework: **Next.js 14+ (App Router)**
- Styling: **Tailwind CSS**, **Framer Motion** (for gentle transitions).
- Icons: **Lucide React**.
- State/Persistence: **React Hooks** + **LocalStorage** (Custom hook or Zustand).
- Markdown: `react-markdown` (for AI responses).

**Key Constraints & Config**:
1.  **Remote API**: `https://admin.xiaoyibao.com.cn/api/v1/chat/completions`
    - **Method**: POST
    - **Auth**: Bearer Token `openapi-xwPYZMgTAW5j0CzezPB7w8Qf2bxfH9TH4N3ixG8D3hca6Mab8AOMI9gyGd3oNJkLQ`
    - **Proxy Required**: NEVER call this directly from the client. Use a Next.js API Route (`/api/chat`).
2.  **User Agreement (ToS)**:
    - Users CANNOT enter the chat until they agree to the terms.
    - Link: `https://uei55ql5ok.feishu.cn/wiki/Kwxew1trEizLxEkVbnEc27annh2?from=from_copylink`
3.  **Anonymous Identity**:
    - On first load, generate a random UUID (`userId`) and store it in LocalStorage.
    - Save all chat history in LocalStorage so it persists across reloads.

**Implementation Steps**:

### Step 1: Project & Proxy Setup
1.  Initialize Next.js.
2.  Create `src/app/api/chat/route.ts`:
    - Accept `{ messages: Message[] }` from frontend.
    - Forward payload to the Remote API.
    - **Crucial**: Handle the **streaming response** properly. Pipe the external stream back to the client.
    - Headers to Remote: `Authorization: Bearer <Key>`, `Content-Type: application/json`.

### Step 2: State Management (The "Brain")
Create a hook `useChatStore.ts` that handles:
1.  `messages`: Array of `{ role: 'user'|'assistant', content: string }`.
2.  `hasAgreed`: Boolean (persisted).
3.  `userId`: String (UUID, persisted).
4.  `actions`: `sendMessage(text)`, `agreeToTerms()`, `clearHistory()`.
*Note: Ensure hydration logic is handled (don't render persisted data until component mounts).*

### Step 3: The "Gatekeeper" Modal (ToS)
Create a component `WelcomeModal.tsx`.
- **Visuals**: A centered card with a gentle blur backdrop (`backdrop-blur-md`).
- **Text**: "欢迎来到小馨宝。这是一个为您提供心理支持的空间。"
- **Legal**: "进入即代表您同意 [用户协议](<Feishu_Link>)。"
- **Action**: A large, rounded button "开始对话".
- **Logic**: If `!hasAgreed`, show this modal covering the screen.

### Step 4: The Chat Interface (Healing UI)
- **Color Theme**: `bg-stone-50` (Cream), Accents in `teal-600` (Calm Green).
- **Typography**: Large, readable fonts.
- **Message Bubbles**:
  - AI: White, soft shadow, Markdown support.
  - User: `bg-teal-100/50`, text-teal-900.
- **Input Area**: Fixed at bottom.
  - Add a **Microphone Icon** (Button) next to the input. It doesn't need to work yet, just `console.log('TTS Future Feature')`.

### Step 5: Integration
1.  In `page.tsx`, check `hasAgreed`.
2.  If false, show `WelcomeModal`.
3.  If true, show `ChatInterface`.
4.  Load the initial greeting from the AI (The "Welcome, I am Xiaoxinbao..." text) IF the history is empty.

**Design nuance**:
- Use `AnimatePresence` from Framer Motion to fade out the Modal and fade in the Chat.
- Make sure the UI is mobile-first (responsive).

**Immediate Action**:
Scaffold the project, set up the Proxy Route, and build the UI components.
